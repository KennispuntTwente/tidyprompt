<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add tidyprompt function documentation to a function — tools_add_docs • tidyprompt</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add tidyprompt function documentation to a function — tools_add_docs"><meta name="description" content="This function adds documentation to a custom function. This documentation
is used to extract information about the function's name, description, arguments,
and return value. This information is used to provide an LLM with information
about the functions, so that the LLM can call R functions. The intended
use of this function is to add documentation to custom functions that do not
have help files; tools_get_docs() may generate documentation from a
help file when the function is part of base R or a package.
If a function already has documentation, the documentation added by this
function may overwrite it. If you wish to modify existing documentation,
you may make a call to tools_get_docs() to extract the existing documentation,
modify it, and then call tools_add_docs() to add the modified documentation."><meta property="og:description" content="This function adds documentation to a custom function. This documentation
is used to extract information about the function's name, description, arguments,
and return value. This information is used to provide an LLM with information
about the functions, so that the LLM can call R functions. The intended
use of this function is to add documentation to custom functions that do not
have help files; tools_get_docs() may generate documentation from a
help file when the function is part of base R or a package.
If a function already has documentation, the documentation added by this
function may overwrite it. If you wish to modify existing documentation,
you may make a call to tools_get_docs() to extract the existing documentation,
modify it, and then call tools_add_docs() to add the modified documentation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyprompt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/creating_prompt_wraps.html">Creating prompt wraps</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/sentiment_analysis.html">Sentiment analysis in R with a LLM and 'tidyprompt'</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tjarkvandemerwe/tidyprompt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add tidyprompt function documentation to a function</h1>
      <small class="dont-index">Source: <a href="https://github.com/tjarkvandemerwe/tidyprompt/blob/main/R/answer_using_tools.R" class="external-link"><code>R/answer_using_tools.R</code></a></small>
      <div class="d-none name"><code>tools_add_docs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function adds documentation to a custom function. This documentation
is used to extract information about the function's name, description, arguments,
and return value. This information is used to provide an LLM with information
about the functions, so that the LLM can call R functions. The intended
use of this function is to add documentation to custom functions that do not
have help files; <code><a href="tools_get_docs.html">tools_get_docs()</a></code> may generate documentation from a
help file when the function is part of base R or a package.</p>
<p>If a function already has documentation, the documentation added by this
function may overwrite it. If you wish to modify existing documentation,
you may make a call to <code><a href="tools_get_docs.html">tools_get_docs()</a></code> to extract the existing documentation,
modify it, and then call <code>tools_add_docs()</code> to add the modified documentation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tools_add_docs</span><span class="op">(</span><span class="va">func</span>, <span class="va">docs</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-func">func<a class="anchor" aria-label="anchor" href="#arg-func"></a></dt>
<dd><p>A function object</p></dd>


<dt id="arg-docs">docs<a class="anchor" aria-label="anchor" href="#arg-docs"></a></dt>
<dd><p>A list with the following elements:</p><ul><li><p>'name': (optional) The name of the function. If not provided, the function
name will be extracted from the function object. Use this parameter to override
the function name if necessary</p></li>
<li><p>'description': A description of the function and its purpose</p></li>
<li><p>'arguments': A named list of arguments with descriptions. Each argument is a list
which may contain:</p><ul><li><p>'description': A description of the argument and its purpose. Not
required or used for native function calling (e.g., with OpenAI), but recommended
for text-based function calling</p></li>
<li><p>'type': The type of the argument. This should be one of:
'integer', 'numeric', 'logical', 'string', 'match.arg',
'vector integer', 'vector numeric', 'vector logical', 'vector string'.
For arguments which are named lists, 'type' should be a named list
which contains the types of the elements. For type 'match.arg', the
possible values should be passed as a vector under 'default_value'.
'type' is required for native function calling (with, e.g., OpenAI) but may
also be useful to provide for text-based function calling, in which it will
be added to the prompt introducing the function</p></li>
<li><p>'default_value': The default value of the argument. This is only required
when 'type' is set to 'match.arg'. It should then be a vector of possible values
for the argument. In other cases, it is not required; for native function calling,
it is not used in other cases; for text-based function calling, it may be useful
to provide the default value, which will be added to the prompt introducing the
function</p></li>
</ul></li>
<li><p>'return': A list with the following elements:</p><ul><li><p>'description': A description of the return value or the side effects of the function</p></li>
</ul></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function object with the documentation added as an attribute
('tidyprompt_tool_docs')</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># When using functions from base R or R packages,</span></span></span>
<span class="r-in"><span><span class="co">#   suitable documentation may be available in the form of help files:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="st">"What are the files in my current directory?"</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="answer_using_tools.html">answer_using_tools</a></span><span class="op">(</span><span class="va">list.files</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="send_prompt.html">send_prompt</a></span><span class="op">(</span><span class="fu"><a href="llm_provider_openai.html">llm_provider_openai</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Below it is shown how to use custom functions and how to override</span></span></span>
<span class="r-in"><span><span class="co">#   automatically generated documentation:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example fake weather function to add to the prompt:</span></span></span>
<span class="r-in"><span><span class="va">temperature_in_location</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">location</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Amsterdam"</span>, <span class="st">"Utrecht"</span>, <span class="st">"Enschede"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">unit</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Celcius"</span>, <span class="st">"Fahrenheit"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">location</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.arg.html" class="external-link">match.arg</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">unit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.arg.html" class="external-link">match.arg</a></span><span class="op">(</span><span class="va">unit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">temperature_celcius</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">location</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Amsterdam"</span> <span class="op">=</span> <span class="fl">32.5</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Utrecht"</span> <span class="op">=</span> <span class="fl">19.8</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Enschede"</span> <span class="op">=</span> <span class="fl">22.7</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="va">unit</span> <span class="op">==</span> <span class="st">"Celcius"</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">temperature_celcius</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">temperature_celcius</span> <span class="op">*</span> <span class="fl">9</span><span class="op">/</span><span class="fl">5</span> <span class="op">+</span> <span class="fl">32</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate documentation for a function</span></span></span>
<span class="r-in"><span><span class="co">#   (based on formals, &amp; help file if available)</span></span></span>
<span class="r-in"><span><span class="va">docs</span> <span class="op">&lt;-</span> <span class="fu"><a href="tools_get_docs.html">tools_get_docs</a></span><span class="op">(</span><span class="va">temperature_in_location</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in get(name, mode = "function"):</span> object 'temperature_in_location' of mode 'function' was not found</span>
<span class="r-in"><span><span class="va">docs</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># As we can see, the types were correctly inferred from the function's formals</span></span></span>
<span class="r-in"><span><span class="co"># However, descriptions are still missing as the function is not from a package</span></span></span>
<span class="r-in"><span><span class="co"># We can modify the documentation object to add descriptions:</span></span></span>
<span class="r-in"><span><span class="va">docs</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"Get the temperature in a location"</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span><span class="va">docs</span><span class="op">$</span><span class="va">arguments</span><span class="op">$</span><span class="va">unit</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"Unit in which to return the temperature"</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span><span class="va">docs</span><span class="op">$</span><span class="va">arguments</span><span class="op">$</span><span class="va">location</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"Location for which to return the temperature"</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span><span class="va">docs</span><span class="op">$</span><span class="va">return</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"The temperature in the specified location and unit"</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span><span class="co"># (See `?tools_add_docs` for more details on the structure of the documentation object)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># When we are satisfied with the documentation, we can add it to the function:</span></span></span>
<span class="r-in"><span><span class="va">temperature_in_location</span> <span class="op">&lt;-</span> <span class="fu">tools_add_docs</span><span class="op">(</span><span class="va">temperature_in_location</span>, <span class="va">docs</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'docs' not found</span>
<span class="r-in"><span><span class="co"># (`tools_get_docs()` will now return the documentation we added)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now we can use the function in a prompt:</span></span></span>
<span class="r-in"><span><span class="va">prompt</span> <span class="op">&lt;-</span> <span class="st">"Hi, what is the weather in Enschede? Give me Celcius degrees"</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="answer_using_tools.html">answer_using_tools</a></span><span class="op">(</span><span class="va">temperature_in_location</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="va">prompt</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="send_prompt.html">send_prompt</a></span><span class="op">(</span><span class="fu"><a href="llm_provider_ollama.html">llm_provider_ollama</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luka Koning, Tjark Van de Merwe, Kennispunt Twente.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

