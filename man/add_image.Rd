% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc_add_image.R
\name{add_image}
\alias{add_image}
\title{Add an image to a tidyprompt (multimodal)}
\usage{
add_image(
  prompt,
  image,
  alt = NULL,
  detail = c("auto", "low", "high"),
  mime = NULL
)
}
\arguments{
\item{prompt}{A single string or a \code{\link[=tidyprompt]{tidyprompt()}} object}

\item{image}{An image reference. One of:
\itemize{
\item a local file path (e.g., "path/to/image.png")
\item a URL (e.g., "https://.../image.jpg")
\item a base64 string (optionally with data URL prefix)
\item a raw vector of bytes
\item an ellmer content object created by \code{content_image_url()},
\code{content_image_file()}, or \code{content_image_plot()}
}

For OpenAI Responses API, URLs must point directly to an image resource (not an HTML
page) and are transmitted as a scalar string \code{image_url} with optional \code{detail}.
Supplying a webpage URL (e.g. a Wikipedia media viewer link) will result in a
provider 400 error expecting an image URL string.}

\item{alt}{Optional alternative text/alt description}

\item{detail}{Detail hint for some providers (OpenAI): one of "auto", "low", "high"}

\item{mime}{Optional mime-type if providing raw/base64 without data URL (e.g., "image/png")}
}
\value{
A \code{\link[=tidyprompt]{tidyprompt()}} with a multimodal \code{\link[=prompt_wrap]{prompt_wrap()}} attached
}
\description{
Attach an image to the last user message by adding a \code{\link[=prompt_wrap]{prompt_wrap()}} that
configures providers to send image content alongside the text prompt.
}
\details{
Supported providers:
\itemize{
\item OpenAI-compatible Chat Completions and Responses APIs (uses multimodal content parts)
\item Ollama chat API (adds base64 images in the last user message)
\item Ellmer-backed providers (best-effort: uses ellmer Content* image types when available)
\item You can also pass \code{ellmer::content_image_url()}, \code{ellmer::content_image_file()}, or \code{ellmer::content_image_plot()} objects directly as \code{image}.
}
}
\seealso{
Other pre_built_prompt_wraps: 
\code{\link{add_text}()},
\code{\link{answer_as_boolean}()},
\code{\link{answer_as_category}()},
\code{\link{answer_as_integer}()},
\code{\link{answer_as_json}()},
\code{\link{answer_as_list}()},
\code{\link{answer_as_multi_category}()},
\code{\link{answer_as_named_list}()},
\code{\link{answer_as_regex_match}()},
\code{\link{answer_as_text}()},
\code{\link{answer_by_chain_of_thought}()},
\code{\link{answer_by_react}()},
\code{\link{answer_using_r}()},
\code{\link{answer_using_sql}()},
\code{\link{answer_using_tools}()},
\code{\link{prompt_wrap}()},
\code{\link{quit_if}()},
\code{\link{set_system_prompt}()}

Other miscellaneous_prompt_wraps: 
\code{\link{add_text}()},
\code{\link{quit_if}()},
\code{\link{set_system_prompt}()}
}
\concept{miscellaneous_prompt_wraps}
\concept{pre_built_prompt_wraps}
